const{createEmbed,sendEmbed}=require("../functions");const{blue,red}=require('../colors.json');const{botGuild}=require('../config.json');const{query}=require("../dbfunctions");module.exports={name:"worker",description:"get info on a pixel pizza worker with the user id",args:true,minArgs:1,maxArgs:1,usage:"<user id>",cooldown:0,userType:"staff",neededPerms:[],ppOnly:true,async execute(message,args,client){let embedMsg = createEmbed(blue,`**${this.name}**`,null,{name:message.author.username,icon:message.author.displayAvatarURL()},null,null,[],null,true,{text:client.user.username,icon:client.user.displayAvatarURL()});if(isNaN(args[0]) || args[0].length != 18){embedMsg.setColor(red).setDescription(`${args[0]} is not a user id`);sendEmbed(embedMsg,message);}const result=await query("SELECT * FROM worker WHERE workerId = ?",[args[0]]);if(!result.length){embedMsg.setColor(red).setDescription(`This user is not a pixel pizza worker`);sendEmbed(embedMsg,message);}const worker=result[0];const guild=client.guilds.cache.get(botGuild);const member=guild.members.cache.get(args[0]);if (!worker.deliveryMessage) worker.deliveryMessage = "none";embedMsg.addFields({name:"Username",value:member.displayName},{name:"Cooks",value:worker.cooks,inline:true},{name:"Deliveries",value:worker.deliveries,inline:true},{name:"Delivery Message",value:worker.deliveryMessage},{name:"Added At",value:worker.addedAt});if(!client.canSendEmbeds)embedMsg=`Username\n\`${member.displayName}\`\nCooks\n\`${worker.cooks}\`\nDeliveries\n\`${worker.deliveries}\`\nDelivery Message\n\`\`\`\n${worker.deliveryMessage}\n\`\`\`\nAdded At\n\`${worker.addedAt}\``;message.channel.send(embedMsg);}}